# hw05-module3-lambda-api-gw

# Lambda

### 1. Create Lambda function using python and boto3
#### 1.1. The function should get list of EC2 instances
![alt text](<screenshots/1/Знімок екрана з 2024-05-05 21-32-44.png>)
![alt text](<screenshots/1/Знімок екрана з 2024-05-05 21-34-07.png>)
![alt text](<screenshots/1/Знімок екрана з 2024-05-05 21-38-23.png>)
![alt text](<screenshots/1/Знімок екрана з 2024-05-05 23-39-17.png>)
![alt text](<screenshots/1/Знімок екрана з 2024-05-05 23-40-01.png>)
![alt text](<screenshots/1/Знімок екрана з 2024-05-05 23-40-09.png>)
![alt text](<screenshots/1/Знімок екрана з 2024-05-05 23-40-29.png>)
![alt text](<screenshots/1/Знімок екрана з 2024-05-05 23-40-54.png>)
#### 1.2. Check if it is running and has the "Owner=Your Name" tag
![alt text](<screenshots/2/Знімок екрана з 2024-05-06 00-00-00.png>)
![alt text](<screenshots/2/Знімок екрана з 2024-05-06 00-00-17.png>)
![alt text](<screenshots/2/Знімок екрана з 2024-05-06 00-00-41.png>)
![alt text](<screenshots/2/Знімок екрана з 2024-05-06 00-01-26.png>)
![alt text](<screenshots/2/Знімок екрана з 2024-05-06 00-04-07.png>)
![alt text](<screenshots/2/Знімок екрана з 2024-05-06 00-13-03.png>)
![alt text](<screenshots/2/Знімок екрана з 2024-05-06 00-13-23.png>)
![alt text](<screenshots/2/Знімок екрана з 2024-05-06 00-13-49.png>)

#### 1.3. Then stop it or skip otherwise
![alt text](<screenshots/3/Знімок екрана з 2024-05-06 00-32-48.png>)
![alt text](<screenshots/3/Знімок екрана з 2024-05-06 00-33-18.png>)
![alt text](<screenshots/3/Знімок екрана з 2024-05-06 00-33-31.png>)
![alt text](<screenshots/3/Знімок екрана з 2024-05-06 00-33-54.png>)

#### 1.4. Return the list of stopped instance IDs
![alt text](<screenshots/4/Знімок екрана з 2024-05-06 00-44-18.png>)
![alt text](<screenshots/4/Знімок екрана з 2024-05-06 00-45-22.png>)
![alt text](<screenshots/4/Знімок екрана з 2024-05-06 00-45-47.png>)
![alt text](<screenshots/4/Знімок екрана з 2024-05-06 00-45-56.png>)



### 2. Create Lambda function using python and boto3
#### 2.1. The function should get list of EC2 instances
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-07-51.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-09-07.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-09-18.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-09-43.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-16-15.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-16-20.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-17-37.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-19-13.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-19-19.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-19-28.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-20-17.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-21-52.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-24-47.png>)
![alt text](<screenshots/start1/Знімок екрана з 2024-05-06 01-25-24.png>)

#### 2.2. Check if it is stopped and has the "Owner=Your Name" tag
![alt text](<screenshots/start2/Знімок екрана з 2024-05-06 01-49-19.png>)
![alt text](<screenshots/start2/Знімок екрана з 2024-05-06 01-49-40.png>)
![alt text](<screenshots/start2/Знімок екрана з 2024-05-06 01-50-02.png>)

#### 2.3. Then start it or skip otherwise
![alt text](<screenshots/start3/Знімок екрана з 2024-05-06 02-06-10.png>)
![alt text](<screenshots/start3/Знімок екрана з 2024-05-06 02-12-46.png>)
![alt text](<screenshots/start3/Знімок екрана з 2024-05-06 02-13-07.png>)
![alt text](<screenshots/start3/Знімок екрана з 2024-05-06 02-13-19.png>)
![alt text](<screenshots/start3/Знімок екрана з 2024-05-06 02-13-31.png>)

#### 2.4. Return the list of started instance IDs
![alt text](<screenshots/start4/Знімок екрана з 2024-05-06 02-25-58.png>)
![alt text](<screenshots/start4/Знімок екрана з 2024-05-06 02-26-13.png>)
![alt text](<screenshots/start4/Знімок екрана з 2024-05-06 02-26-35.png>)
![alt text](<screenshots/start4/Знімок екрана з 2024-05-06 02-26-56.png>)


### 3. Run both lambda functions and confirm that they work
![alt text](<screenshots/both/Знімок екрана з 2024-05-06 02-32-20.png>)
![alt text](<screenshots/both/Знімок екрана з 2024-05-06 02-32-39.png>)
![alt text](<screenshots/both/Знімок екрана з 2024-05-06 02-32-54.png>)
![alt text](<screenshots/both/Знімок екрана з 2024-05-06 02-33-14.png>)
![alt text](<screenshots/both/Знімок екрана з 2024-05-06 02-33-28.png>)
![alt text](<screenshots/both/Знімок екрана з 2024-05-06 02-34-19.png>)
![alt text](<screenshots/both/Знімок екрана з 2024-05-06 02-34-38.png>)
![alt text](<screenshots/both/Знімок екрана з 2024-05-06 02-34-51.png>)




# API Gateway

### 1. Create API gateway with the following endpoints:
#### /instances/stop - triggers the 1st lambda
#### /instances/start - triggers the 2nd lambda


### 2. Confirm that it works as expected


# Advanced
### 1. Create lambda function which gets ID of instance and needed operation (stop/start)

### 2. Get list of instances and finds that record if exists

### 3. If record is found then perform the operation

### 4. Create endpoint in API GW /instance/{ID}/{operation} and point it to the new lambda

### 5. Find ID of any existing EC2 instance and use it you your requests to stop/start the VM via API GW



## Cleanup
### 1. Add code of lambda function to your project
### 2. Remove all lambdas and API GW from AWS